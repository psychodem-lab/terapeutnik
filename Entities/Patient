{
  "name": "Patient",
  "type": "object",
  "properties": {
    "imie": {
      "type": "string",
      "description": "Imi\u0119 pacjenta"
    },
    "nazwisko": {
      "type": "string",
      "description": "Nazwisko lub pseudonim pacjenta"
    },
    "email": {
      "type": "string",
      "format": "email",
      "description": "Adres email pacjenta"
    },
    "meeting_link": {
      "type": "string",
      "format": "uri",
      "description": "Link do spotkania online (np. Zoom, Teams)"
    },
    "google_doc_link": {
      "type": "string",
      "format": "uri",
      "description": "Link do wsp\u00f3lnego dokumentu Google"
    },
    "data_urodzenia": {
      "type": "string",
      "format": "date",
      "description": "Data urodzenia pacjenta (opcjonalnie)"
    },
    "notatki": {
      "type": "string",
      "description": "Stare notatki tekstowe o pacjencie (legacy)"
    },
    "notatki_z_data": {
      "type": "array",
      "items": {
        "type": "object",
        "properties": {
          "date": {
            "type": "string",
            "format": "date-time"
          },
          "content": {
            "type": "string"
          },
          "id": {
            "type": "string"
          }
        },
        "required": [
          "date",
          "content",
          "id"
        ]
      },
      "default": [],
      "description": "Notatki z datami"
    },
    "diagnosis_notes": {
      "type": "array",
      "items": {
        "type": "object",
        "properties": {
          "date": {
            "type": "string",
            "format": "date-time"
          },
          "content": {
            "type": "string"
          },
          "id": {
            "type": "string"
          },
          "type": {
            "type": "string",
            "enum": [
              "diagnoza",
              "testy_psychologiczne",
              "ocena_stanu",
              "konceptualizacja"
            ],
            "default": "diagnoza"
          }
        },
        "required": [
          "date",
          "content",
          "id",
          "type"
        ]
      },
      "default": [],
      "description": "Notatki diagnostyczne i konceptualizacja"
    },
    "telefon": {
      "type": "string",
      "description": "Numer telefonu pacjenta"
    },
    "status": {
      "type": "string",
      "enum": [
        "aktywny",
        "nieaktywny",
        "zako\u0144czona_terapia",
        "oczekuj\u0105cy"
      ],
      "default": "aktywny",
      "description": "Status terapii pacjenta"
    },
    "miejsce_terapii": {
      "type": "string",
      "description": "Miejsce prowadzenia terapii lub adres gabinetu"
    },
    "attachments": {
      "type": "array",
      "items": {
        "type": "object",
        "properties": {
          "url": {
            "type": "string"
          },
          "name": {
            "type": "string"
          },
          "type": {
            "type": "string"
          }
        }
      },
      "default": [],
      "description": "Lista za\u0142\u0105cznik\u00f3w pacjenta"
    }
  },
  "required": [
    "imie",
    "nazwisko"
  ],
  "rls": {
    "read": {
      "created_by": "{{user.email}}"
    },
    "write": {
      "created_by": "{{user.email}}"
    }
  }
}
